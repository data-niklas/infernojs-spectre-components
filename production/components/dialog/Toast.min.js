import{Component,render,createRef}from"../../inferno.min.js";import{createElement as c}from"../../inferno-create-element.min.js";var Timer=function(callback,delay){var timerId,start,remaining=delay,isPaused=!0;this.pause=function(){isPaused||(isPaused=!0,clearTimeout(timerId),remaining-=Date.now()-start)},this.resume=function(){isPaused&&(isPaused=!1,start=Date.now(),timerId=setTimeout(callback,remaining))},this.resume()},toastContainer;class Toast extends Component{constructor(props){super(props)}render(){var props={},className="toast";this.props.color&&(className+=" toast-"+this.props.color),props.className=className;var style="";this.props.halign&&(style+="justify-self:"+this.props.halign+";"),this.props.valign&&(style+="align-self:"+this.props.valign+";"),style.length>0&&(props.style=style);var items=[];if(!0===this.props.deletable){var btnProps={className:"btn btn-clear float-right"};this.props.onClick&&(btnProps.onClick=this.props.onClick),items.push(c("button",btnProps))}return this.props.title&&items.push(c("h6",null,this.props.title)),this.props.subTitle&&items.push(c("p",null,this.props.subTitle)),this.props.text&&items.push(this.props.text),this.props.onmouseout&&(props.onmouseout=this.props.onmouseout),this.props.onmouseover&&(props.onmouseover=this.props.onmouseover),c("div",props,items)}}class ToastContainer extends Component{constructor(props){super(props),this.state={toasts:[]},this.showToast=this.showToast.bind(this)}render(){var props;return c("div",{className:"toast-container"},this.state.toasts)}showToast(toast,duration){var timer={pause:()=>{},resume:()=>{}};toast.props.onmouseover=e=>{"toast"===e.target.className&&timer.pause()},toast.props.onmouseout=e=>{var related=e.relatedTarget;related&&"toast"!==related.className&&"toast"!==related.parentElement.className&&timer.resume()},!0===toast.props.deletable&&(toast.props.onClick=()=>{done()});var toasts=this.state.toasts;toasts.push(toast);var done=()=>{var stringified=JSON.stringify(toast);toasts=that.state.toasts.filter(e=>JSON.stringify(e)!==stringified),that.setState({toasts:toasts})};this.setState({toasts:toasts});var that=this;timer=new Timer(()=>{done()},duration)}}function showToast(subTitle,title=null,duration=2e3,deletable=!1,valign="end",halign="center",color=null){toastContainer||(toastContainer=createRef(),render(c(ToastContainer,{ref:toastContainer}),document.body));var toast=c(Toast,{subTitle:subTitle,title:title,valign:valign,halign:halign,deletable:deletable,color:color});toastContainer.current.showToast(toast,duration)}function success(subTitle,title,duration,deletable,valign,halign){showToast(subTitle,title,duration,deletable,valign,halign,"success")}function warning(subTitle,title,duration,deletable,valign,halign){showToast(subTitle,title,duration,deletable,valign,halign,"warning")}function error(subTitle,title,duration,deletable,valign,halign){showToast(subTitle,title,duration,deletable,valign,halign,"error")}function primary(subTitle,title,duration,deletable,valign,halign){showToast(subTitle,title,duration,deletable,valign,halign,"primary")}export default{success:success,showToast:showToast,Toast:Toast,warning:warning,error:error,primary:primary};