import{Component}from"../../inferno.min.js";import{createElement as c}from"../../inferno-create-element.min.js";import{generateClassName,addEvents}from"../Utils.min.js";import Link from"./Link.min.js";class Pagination extends Component{constructor(props){super(props),this.state={page:this.props.page||1},this.previous=this.previous.bind(this),this.next=this.next.bind(this),this.setPage=this.setPage.bind(this)}previous(){this.setPage(this.state.page-1)}next(){this.setPage(this.state.page+1)}setPage(page){this.setState({page:page}),this.props.onPage&&this.props.onPage(page)}render(){var props={},className="pagination",type,items;if(props=generateClassName(this.props,className),props=addEvents(this.props,props),"numbers"===(this.props.type||"numbers")){items=this.generateNumbers();var listener=props.onClick,that=this;props.onClick=e=>{var target=e.target;if("A"===target.tagName&&"..."!=inner){var inner=target.innerHTML;switch(inner){case"Next":that.next();break;case"Previous":that.previous();break;default:inner!=that.state.page&&that.setPage(Number(inner))}}listener&&listener(e)}}else items=this.generateText(props);return c("ul",props,items)}generateNumbers(){var items=[],pages=this.props.pages,page=this.state.page;items.push(c("li",{className:"page-item"+(1===page?" disabled":"")},c(Link,{href:"javascript:void(0)"},"Previous")));var shownPages=this.removeDuplicates([1,2,page-1,page,page+1,pages-1,pages]).filter(e=>e>0&&e<=pages);for(let index=0;index<shownPages.length;index++){const element=shownPages[index];index>0&&element-1!=shownPages[index-1]&&items.push(c("li",{className:"page-item"},c("span",null,"..."))),items.push(c("li",{className:"page-item"+(page==element?" active":"")},c(Link,{href:"javascript:void(0)"},element.toString())))}return items.push(c("li",{className:"page-item"+(page===pages?" disabled":"")},c(Link,{href:"javascript:void(0)"},"Next"))),items}generateText(props){var items=[],pages=this.props.pages,page=this.state.page,prevItems=[];prevItems.push(c("div",{className:"page-item-subtitle"},"Previous")),1!=page&&prevItems.push(c("div",{className:"page-item-title h5"},pages[page-2])),items.push(c("li",{className:"page-item page-prev"+(1===page?" disabled":"")},c(Link,{href:"javascript:void(0)",onClick:this.previous},prevItems)));var nextItems=[];return nextItems.push(c("div",{className:"page-item-subtitle"},"Next")),page!=pages.length&&nextItems.push(c("div",{className:"page-item-title h5"},pages[page])),items.push(c("li",{className:"page-item page-next"+(page===pages.length?" disabled":"")},c(Link,{href:"javascript:void(0)",onClick:this.next},nextItems))),items}removeDuplicates(arr){var o={};return arr.forEach((function(e){o[e]=!0})),Object.keys(o)}}export default Pagination;